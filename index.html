<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Unit 3 ‚Äì Present Perfect (Ripasso + Quiz)</title>
  <style>
    :root{
      --bg:#0b1020;
      --text:rgba(255,255,255,0.92);
      --muted:rgba(255,255,255,0.65);
      --line:rgba(255,255,255,0.14);
      --shadow:0 10px 30px rgba(0,0,0,0.35);
      --radius:18px;
      --ok:rgba(0,255,170,0.85);
      --bad:rgba(255,90,90,0.9);
      --warn:rgba(255,210,80,0.9);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; font-family:var(--sans); color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(80,120,255,0.20), transparent 60%),
        radial-gradient(900px 600px at 90% 20%, rgba(0,255,170,0.14), transparent 55%),
        radial-gradient(900px 700px at 40% 90%, rgba(255,90,90,0.12), transparent 55%),
        var(--bg);
      min-height:100vh; padding:22px;
    }
    header{
      max-width:980px; margin:0 auto 18px auto;
      display:flex; gap:14px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;
    }
    .title{
      flex:1 1 560px;
      background:linear-gradient(135deg, rgba(255,255,255,0.14), rgba(255,255,255,0.06));
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:16px 18px;
      box-shadow:var(--shadow);
    }
    h1{ margin:0 0 8px 0; font-size:20px; letter-spacing:.2px; }
    .subtitle{ color:var(--muted); font-size:13.5px; line-height:1.35; }
    .panel{
      flex:0 1 340px; min-width:280px;
      background:linear-gradient(135deg, rgba(255,255,255,0.10), rgba(255,255,255,0.05));
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:14px 16px;
      box-shadow:var(--shadow);
    }
    .row{ display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    .pill{
      font-family:var(--mono); font-size:12px;
      padding:6px 10px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,0.06);
    }
    .btn{
      border:1px solid var(--line);
      background:rgba(255,255,255,0.12);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      font-weight:700;
      transition:.15s transform, .15s background;
      user-select:none;
    }
    .btn:hover{ background:rgba(255,255,255,0.18); transform:translateY(-1px); }
    .btn:active{ transform:translateY(0); }
    main{ max-width:980px; margin:0 auto; display:flex; flex-direction:column; gap:14px; }

    .card{
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:linear-gradient(135deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04));
      box-shadow:var(--shadow);
      padding:16px 18px;
    }
    .card h2{
      margin:0 0 10px 0; font-size:16px;
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .hint{ color:var(--muted); font-size:13px; line-height:1.45; margin:0 0 10px 0; }

    /* Slides */
    .slides{
      display:grid; grid-template-columns:1fr 1fr; gap:12px;
    }
    @media (max-width:760px){ .slides{ grid-template-columns:1fr; } }
    .slide{
      border:1px solid var(--line);
      border-radius:16px;
      background:rgba(255,255,255,0.05);
      padding:14px 14px;
    }
    .slide .stitle{ font-weight:850; margin:0 0 6px 0; }
    .slide ul{ margin:8px 0 0 18px; padding:0; color:rgba(255,255,255,0.88); }
    .slide li{ margin:6px 0; }
    .mono{ font-family:var(--mono); font-size:12.5px; color:rgba(255,255,255,0.86); }

    /* Questions */
    .q{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px 12px;
      background:rgba(255,255,255,0.05);
      margin:10px 0;
    }
    .qtitle{ font-weight:800; margin-bottom:8px; }
    .prompt{
      font-family:var(--mono);
      font-size:12.5px;
      color:rgba(255,255,255,0.9);
      background:rgba(0,0,0,0.16);
      border:1px solid var(--line);
      padding:10px 10px;
      border-radius:12px;
      margin:8px 0 10px 0;
      white-space:pre-wrap;
    }
    label{ display:block; margin:7px 0; cursor:pointer; }
    input[type="radio"]{ transform:translateY(1px); margin-right:8px; }

    .feedback{
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,0.04);
      font-size:13.5px; line-height:1.35;
    }
    .ok{ border-color:rgba(0,255,170,0.35); background:rgba(0,255,170,0.10); }
    .bad{ border-color:rgba(255,90,90,0.35); background:rgba(255,90,90,0.10); }
    .warn{ border-color:rgba(255,210,80,0.35); background:rgba(255,210,80,0.10); }
    .small{ font-size:12.5px; color:var(--muted); }

    details{
      margin-top:8px;
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px 12px;
      background:rgba(255,255,255,0.04);
    }
    summary{ cursor:pointer; font-weight:850; }
    .sol{
      margin-top:10px;
      padding-top:10px;
      border-top:1px dashed var(--line);
      color:rgba(255,255,255,0.86);
      font-family:var(--mono);
      font-size:12.5px;
      line-height:1.45;
      white-space:pre-wrap;
    }
  </style>
</head>
<body>

<header>
  <div class="title">
    <h1>Unit 3 ‚Äì Present Perfect | Ripasso ‚Äúa slide‚Äù + Quiz (tempo + perch√©)</h1>
    <div class="subtitle">
      1) Leggi le ‚Äúslide‚Äù (ripasso rapido). 2) Fai il quiz: per ogni frase scegli <b>il tempo</b> e poi scegli <b>il motivo</b>.
      <br>Tip: se sbagli, leggi la spiegazione e ripeti la regola a voce alta.
    </div>
  </div>

  <div class="panel">
    <div class="row">
      <div class="pill">Punteggio: <span id="score">0</span>/<span id="total">0</span></div>
      <div class="pill">Tentativi: <span id="tries">0</span></div>
    </div>
    <div style="height:10px"></div>
    <div class="row">
      <button class="btn" id="checkAllBtn">Correggi tutto</button>
      <button class="btn" id="resetBtn">Reset</button>
    </div>
    <div style="height:10px"></div>
    <div class="hint" style="margin:0">
      <span class="mono">Obiettivo verifica:</span> PP vs SP, been/gone, ever/never, for/since, esperienze ed emozioni.
    </div>
  </div>
</header>

<main>

  <!-- RIPASSO SLIDE -->
  <section class="card" id="card-slides">
    <h2>Ripasso generale (come slide da leggere) <span class="pill">Leggi 2 minuti</span></h2>
    <p class="hint">Leggi a voce alta. Poi prova a ripetere a memoria con 3 frasi: ‚Äúquando uso PP, quando SP, been/gone, ever/never, for/since‚Äù.</p>

    <div class="slides">
      <div class="slide">
        <div class="stitle">Slide 1 ‚Äî Forma del Present Perfect</div>
        <div class="mono">Aff: S + have/has + V3 ‚Ä¢ Neg: S + haven‚Äôt/hasn‚Äôt + V3 ‚Ä¢ Int: Have/Has + S + V3?</div>
        <ul>
          <li>He <b>has finished</b> his homework.</li>
          <li><b>Have</b> you <b>ever been</b> to London?</li>
        </ul>
      </div>

      <div class="slide">
        <div class="stitle">Slide 2 ‚Äî Present Perfect: quando si usa</div>
        <ul>
          <li><b>Esperienze di vita</b> (non dici quando): ‚ÄúI have tried sushi.‚Äù</li>
          <li><b>Effetto nel presente</b>: ‚ÄúI have lost my keys.‚Äù (ora non le ho)</li>
          <li><b>Tempo non finito</b>: ‚ÄúThis week / today‚Äù (se il periodo non √® finito)</li>
        </ul>
      </div>

      <div class="slide">
        <div class="stitle">Slide 3 ‚Äî Simple Past: quando si usa</div>
        <ul>
          <li>Quando c‚Äô√® un <b>tempo finito/preciso</b>: yesterday, last year, in 2020, two days ago‚Ä¶</li>
          <li>Racconti un fatto ‚Äúchiuso‚Äù nel passato: ‚ÄúI visited London last year.‚Äù</li>
        </ul>
      </div>

      <div class="slide">
        <div class="stitle">Slide 4 ‚Äî PP vs SP: trucco velocissimo</div>
        <ul>
          <li>Se vedi <b>yesterday/last/in 2020/ago</b> ‚Üí quasi sempre <b>Simple Past</b>.</li>
          <li>Se NON vedi ‚Äúquando‚Äù ‚Üí spesso <b>Present Perfect</b>.</li>
          <li>Se l‚Äôazione ‚Äúconta adesso‚Äù (risultato) ‚Üí <b>Present Perfect</b>.</li>
        </ul>
      </div>

      <div class="slide">
        <div class="stitle">Slide 5 ‚Äî For / Since</div>
        <ul>
          <li><b>for</b> + durata: for two hours / for three years</li>
          <li><b>since</b> + inizio: since 2020 / since Monday</li>
          <li>Spesso con Present Perfect: ‚ÄúI have lived here for three years.‚Äù</li>
        </ul>
      </div>

      <div class="slide">
        <div class="stitle">Slide 6 ‚Äî Have been / Have gone</div>
        <ul>
          <li><b>have been</b> = sono stato e sono tornato: ‚ÄúI have been to Paris.‚Äù</li>
          <li><b>have gone</b> = √® andato ed √® ancora l√¨: ‚ÄúShe has gone to the gym.‚Äù</li>
        </ul>
      </div>

      <div class="slide">
        <div class="stitle">Slide 7 ‚Äî Ever / Never</div>
        <ul>
          <li><b>ever</b> (domande): ‚ÄúHave you ever‚Ä¶?‚Äù (= mai nella vita?)</li>
          <li><b>never</b> (affermazioni negative): ‚ÄúI have never‚Ä¶‚Äù (senza ‚Äúnot‚Äù)</li>
          <li>Posizione tipica: have/has + <b>ever/never</b> + V3</li>
        </ul>
      </div>

      <div class="slide">
        <div class="stitle">Slide 8 ‚Äî Esperienze ed emozioni</div>
        <ul>
          <li>Esperienza generale: ‚ÄúI have been very happy.‚Äù (non dici quando)</li>
          <li>Momento preciso: ‚ÄúI was nervous yesterday.‚Äù (tempo finito)</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- QUIZ TEMPO -->
  <section class="card" id="card-tense">
    <h2>Quiz A ‚Äî Scegli il tempo giusto <span class="pill">12 punti</span></h2>
    <p class="hint">Per ogni situazione scegli: <b>Present Perfect</b> o <b>Simple Past</b> (oppure been/gone / ever/never quando richiesto).</p>

    <!-- A1 -->
    <div class="q" data-type="mc" data-points="1" data-correct="SP"
         data-explain="C‚Äô√® un tempo finito: 'last year' ‚Üí Simple Past.">
      <div class="qtitle">A1) Scegli il tempo corretto</div>
      <div class="prompt">I ____ (visit) London last year.</div>
      <label><input type="radio" name="A1" value="PP">Present Perfect: have visited</label>
      <label><input type="radio" name="A1" value="SP">Simple Past: visited</label>
    </div>

    <!-- A2 -->
    <div class="q" data-type="mc" data-points="1" data-correct="PP"
         data-explain="Non dici quando: esperienza di vita ‚Üí Present Perfect.">
      <div class="qtitle">A2) Scegli il tempo corretto</div>
      <div class="prompt">I ____ (visit) London.</div>
      <label><input type="radio" name="A2" value="PP">Present Perfect: have visited</label>
      <label><input type="radio" name="A2" value="SP">Simple Past: visited</label>
    </div>

    <!-- A3 -->
    <div class="q" data-type="mc" data-points="1" data-correct="PP"
         data-explain="Effetto nel presente: ora non pu√≤ aprire la porta ‚Üí Present Perfect.">
      <div class="qtitle">A3) Scegli il tempo corretto</div>
      <div class="prompt">I ____ (lose) my keys. I can‚Äôt open the door.</div>
      <label><input type="radio" name="A3" value="PP">Present Perfect: have lost</label>
      <label><input type="radio" name="A3" value="SP">Simple Past: lost</label>
    </div>

    <!-- A4 -->
    <div class="q" data-type="mc" data-points="1" data-correct="SP"
         data-explain="Tempo finito: 'two hours ago' ‚Üí Simple Past.">
      <div class="qtitle">A4) Scegli il tempo corretto</div>
      <div class="prompt">They ____ (arrive) two hours ago.</div>
      <label><input type="radio" name="A4" value="PP">Present Perfect: have arrived</label>
      <label><input type="radio" name="A4" value="SP">Simple Past: arrived</label>
    </div>

    <!-- A5 -->
    <div class="q" data-type="mc" data-points="1" data-correct="PP"
         data-explain="'This week' (spesso tempo non finito) ‚Üí Present Perfect.">
      <div class="qtitle">A5) Scegli il tempo corretto</div>
      <div class="prompt">We ____ (watch) three films this week.</div>
      <label><input type="radio" name="A5" value="PP">Present Perfect: have watched</label>
      <label><input type="radio" name="A5" value="SP">Simple Past: watched</label>
    </div>

    <!-- A6 -->
    <div class="q" data-type="mc" data-points="1" data-correct="PP"
         data-explain="Durata con 'for' e situazione che continua ‚Üí Present Perfect.">
      <div class="qtitle">A6) Scegli il tempo corretto</div>
      <div class="prompt">I ____ (live) here for three years.</div>
      <label><input type="radio" name="A6" value="PP">Present Perfect: have lived</label>
      <label><input type="radio" name="A6" value="SP">Simple Past: lived</label>
    </div>

    <!-- A7 (been/gone) -->
    <div class="q" data-type="mc" data-points="1" data-correct="GONE"
         data-explain="Non √® qui, quindi √® andata ed √® ancora l√¨ ‚Üí have gone.">
      <div class="qtitle">A7) Have been o have gone?</div>
      <div class="prompt">Anna isn‚Äôt here. She has ____ to the supermarket.</div>
      <label><input type="radio" name="A7" value="BEEN">been</label>
      <label><input type="radio" name="A7" value="GONE">gone</label>
    </div>

    <!-- A8 (been/gone) -->
    <div class="q" data-type="mc" data-points="1" data-correct="BEEN"
         data-explain="√à tornato a casa ‚Üí have been.">
      <div class="qtitle">A8) Have been o have gone?</div>
      <div class="prompt">Marco is back home. He has ____ to Milan.</div>
      <label><input type="radio" name="A8" value="BEEN">been</label>
      <label><input type="radio" name="A8" value="GONE">gone</label>
    </div>

    <!-- A9 (ever) -->
    <div class="q" data-type="mc" data-points="1" data-correct="EVER"
         data-explain="Domanda su esperienza: 'Have you ever...?'">
      <div class="qtitle">A9) Ever o never?</div>
      <div class="prompt">Have you ____ eaten sushi?</div>
      <label><input type="radio" name="A9" value="EVER">ever</label>
      <label><input type="radio" name="A9" value="NEVER">never</label>
    </div>

    <!-- A10 (never) -->
    <div class="q" data-type="mc" data-points="1" data-correct="NEVER"
         data-explain="Affermazione negativa: 'I have never...' (senza not).">
      <div class="qtitle">A10) Ever o never?</div>
      <div class="prompt">I have ____ seen snow.</div>
      <label><input type="radio" name="A10" value="EVER">ever</label>
      <label><input type="radio" name="A10" value="NEVER">never</label>
    </div>

    <!-- A11 -->
    <div class="q" data-type="mc" data-points="1" data-correct="SP"
         data-explain="Momento preciso: 'yesterday' ‚Üí Simple Past.">
      <div class="qtitle">A11) Scegli il tempo corretto</div>
      <div class="prompt">She ____ (finish) her homework yesterday.</div>
      <label><input type="radio" name="A11" value="PP">Present Perfect: has finished</label>
      <label><input type="radio" name="A11" value="SP">Simple Past: finished</label>
    </div>

    <!-- A12 -->
    <div class="q" data-type="mc" data-points="1" data-correct="SP"
         data-explain="Tempo finito: 'in 2021' ‚Üí Simple Past.">
      <div class="qtitle">A12) Scegli il tempo corretto</div>
      <div class="prompt">I ____ (meet) my best friend in 2021.</div>
      <label><input type="radio" name="A12" value="PP">Present Perfect: have met</label>
      <label><input type="radio" name="A12" value="SP">Simple Past: met</label>
    </div>
  </section>

  <!-- QUIZ PERCHE' -->
  <section class="card" id="card-why">
    <h2>Quiz B ‚Äî Scegli il ‚Äúperch√©‚Äù (motivazione) <span class="pill">12 punti</span></h2>
    <p class="hint">Stesse situazioni: ora scegli il motivo giusto. (Cos√¨ memorizzi la regola.)</p>

    <!-- B1 -->
    <div class="q" data-type="mc" data-points="1" data-correct="DEF_TIME"
         data-explain="Past Simple si usa con tempo finito/preciso (yesterday/last/in 2020/ago).">
      <div class="qtitle">B1) Perch√© in A1 si usa Simple Past?</div>
      <div class="prompt">I visited London last year.</div>
      <label><input type="radio" name="B1" value="DEF_TIME">Perch√© c‚Äô√® un tempo finito/preciso (‚Äúlast year‚Äù).</label>
      <label><input type="radio" name="B1" value="LIFE_EXP">Perch√© √® un‚Äôesperienza di vita senza ‚Äúquando‚Äù.</label>
      <label><input type="radio" name="B1" value="RESULT_NOW">Perch√© conta il risultato nel presente.</label>
    </div>

    <!-- B2 -->
    <div class="q" data-type="mc" data-points="1" data-correct="LIFE_EXP"
         data-explain="Present Perfect spesso per esperienze (senza dire quando).">
      <div class="qtitle">B2) Perch√© in A2 si usa Present Perfect?</div>
      <div class="prompt">I have visited London.</div>
      <label><input type="radio" name="B2" value="DEF_TIME">Perch√© c‚Äô√® un tempo finito/preciso.</label>
      <label><input type="radio" name="B2" value="LIFE_EXP">Perch√© non dico quando: esperienza di vita.</label>
      <label><input type="radio" name="B2" value="AGO">Perch√© c‚Äô√® ‚Äúago‚Äù.</label>
    </div>

    <!-- B3 -->
    <div class="q" data-type="mc" data-points="1" data-correct="RESULT_NOW"
         data-explain="Present Perfect per risultato/effetto nel presente.">
      <div class="qtitle">B3) Perch√© in A3 si usa Present Perfect?</div>
      <div class="prompt">I have lost my keys. I can‚Äôt open the door.</div>
      <label><input type="radio" name="B3" value="RESULT_NOW">Perch√© l‚Äôeffetto √® nel presente (ora non posso aprire).</label>
      <label><input type="radio" name="B3" value="DEF_TIME">Perch√© c‚Äô√® un tempo finito/preciso.</label>
      <label><input type="radio" name="B3" value="SINCE">Perch√© c‚Äô√® ‚Äúsince‚Äù.</label>
    </div>

    <!-- B4 -->
    <div class="q" data-type="mc" data-points="1" data-correct="AGO"
         data-explain="‚Äúago‚Äù indica un tempo finito nel passato ‚Üí Simple Past.">
      <div class="qtitle">B4) Perch√© in A4 si usa Simple Past?</div>
      <div class="prompt">They arrived two hours ago.</div>
      <label><input type="radio" name="B4" value="AGO">Perch√© c‚Äô√® ‚Äúago‚Äù (tempo finito nel passato).</label>
      <label><input type="radio" name="B4" value="LIFE_EXP">Perch√© √® un‚Äôesperienza di vita.</label>
      <label><input type="radio" name="B4" value="UNFINISHED">Perch√© il tempo non √® finito (this week).</label>
    </div>

    <!-- B5 -->
    <div class="q" data-type="mc" data-points="1" data-correct="UNFINISHED"
         data-explain="This week/today pu√≤ essere un periodo non finito ‚Üí spesso Present Perfect.">
      <div class="qtitle">B5) Perch√© in A5 si usa Present Perfect?</div>
      <div class="prompt">We have watched three films this week.</div>
      <label><input type="radio" name="B5" value="UNFINISHED">Perch√© ‚Äúthis week‚Äù pu√≤ essere un tempo non finito.</label>
      <label><input type="radio" name="B5" value="DEF_TIME">Perch√© ‚Äúthis week‚Äù √® un tempo finito.</label>
      <label><input type="radio" name="B5" value="AGO">Perch√© c‚Äô√® ‚Äúago‚Äù.</label>
    </div>

    <!-- B6 -->
    <div class="q" data-type="mc" data-points="1" data-correct="DURATION"
         data-explain="For + durata (e situazione che continua) ‚Üí spesso Present Perfect.">
      <div class="qtitle">B6) Perch√© in A6 si usa Present Perfect?</div>
      <div class="prompt">I have lived here for three years.</div>
      <label><input type="radio" name="B6" value="DURATION">Perch√© ‚Äúfor‚Äù indica durata (e spesso continua fino ad ora).</label>
      <label><input type="radio" name="B6" value="DEF_TIME">Perch√© c‚Äô√® un tempo finito/preciso.</label>
      <label><input type="radio" name="B6" value="EVER">Perch√© c‚Äô√® ‚Äúever‚Äù.</label>
    </div>

    <!-- B7 -->
    <div class="q" data-type="mc" data-points="1" data-correct="GONE_NOT_HERE"
         data-explain="Have gone = √® andato ed √® ancora l√¨ (non √® qui).">
      <div class="qtitle">B7) Perch√© in A7 la risposta √® ‚Äúgone‚Äù?</div>
      <div class="prompt">Anna isn‚Äôt here. She has gone to the supermarket.</div>
      <label><input type="radio" name="B7" value="GONE_NOT_HERE">Perch√© non √® qui: √® andata ed √® ancora l√¨.</label>
      <label><input type="radio" name="B7" value="BEEN_BACK">Perch√© √® tornata a casa.</label>
      <label><input type="radio" name="B7" value="DEF_TIME">Perch√© c‚Äô√® un tempo finito.</label>
    </div>

    <!-- B8 -->
    <div class="q" data-type="mc" data-points="1" data-correct="BEEN_BACK"
         data-explain="Have been = sono stato e sono tornato (√® back home).">
      <div class="qtitle">B8) Perch√© in A8 la risposta √® ‚Äúbeen‚Äù?</div>
      <div class="prompt">Marco is back home. He has been to Milan.</div>
      <label><input type="radio" name="B8" value="BEEN_BACK">Perch√© √® tornato: been = andato e tornato.</label>
      <label><input type="radio" name="B8" value="GONE_NOT_HERE">Perch√© non √® qui.</label>
      <label><input type="radio" name="B8" value="EVER">Perch√© √® una domanda con ever.</label>
    </div>

    <!-- B9 -->
    <div class="q" data-type="mc" data-points="1" data-correct="EVER_Q"
         data-explain="Ever si usa spesso nelle domande su esperienze di vita.">
      <div class="qtitle">B9) Perch√© in A9 si usa ‚Äúever‚Äù?</div>
      <div class="prompt">Have you ever eaten sushi?</div>
      <label><input type="radio" name="B9" value="EVER_Q">Perch√© √® una domanda ‚ÄúHai mai‚Ä¶?‚Äù (esperienza di vita).</label>
      <label><input type="radio" name="B9" value="NEVER_NEG">Perch√© √® una frase negativa.</label>
      <label><input type="radio" name="B9" value="DEF_TIME">Perch√© c‚Äô√® un tempo finito.</label>
    </div>

    <!-- B10 -->
    <div class="q" data-type="mc" data-points="1" data-correct="NEVER_NEG"
         data-explain="Never significa ‚Äúmai‚Äù e di solito non vuole ‚Äúnot‚Äù.">
      <div class="qtitle">B10) Perch√© in A10 si usa ‚Äúnever‚Äù?</div>
      <div class="prompt">I have never seen snow.</div>
      <label><input type="radio" name="B10" value="NEVER_NEG">Perch√© ‚Äúnever‚Äù = mai (frase negativa senza ‚Äúnot‚Äù).</label>
      <label><input type="radio" name="B10" value="EVER_Q">Perch√© √® una domanda.</label>
      <label><input type="radio" name="B10" value="AGO">Perch√© c‚Äô√® ‚Äúago‚Äù.</label>
    </div>

    <!-- B11 -->
    <div class="q" data-type="mc" data-points="1" data-correct="DEF_TIME"
         data-explain="Yesterday = tempo finito ‚Üí Simple Past.">
      <div class="qtitle">B11) Perch√© in A11 si usa Simple Past?</div>
      <div class="prompt">She finished her homework yesterday.</div>
      <label><input type="radio" name="B11" value="DEF_TIME">Perch√© ‚Äúyesterday‚Äù √® un tempo finito/preciso.</label>
      <label><input type="radio" name="B11" value="RESULT_NOW">Perch√© conta il risultato nel presente.</label>
      <label><input type="radio" name="B11" value="UNFINISHED">Perch√© il tempo non √® finito.</label>
    </div>

    <!-- B12 -->
    <div class="q" data-type="mc" data-points="1" data-correct="DEF_TIME"
         data-explain="In 2021 √® un momento preciso ‚Üí Simple Past.">
      <div class="qtitle">B12) Perch√© in A12 si usa Simple Past?</div>
      <div class="prompt">I met my best friend in 2021.</div>
      <label><input type="radio" name="B12" value="DEF_TIME">Perch√© ‚Äúin 2021‚Äù √® un momento preciso nel passato.</label>
      <label><input type="radio" name="B12" value="LIFE_EXP">Perch√© non dico quando.</label>
      <label><input type="radio" name="B12" value="DURATION">Perch√© c‚Äô√® ‚Äúfor‚Äù.</label>
    </div>
  </section>

  <!-- SOLUZIONI -->
  <section class="card" id="solutions">
    <h2>Soluzioni (visibili) <span class="pill">Reference</span></h2>
    <p class="hint">Non leggerle subito üòÑ Prima fai i quiz, poi correggi.</p>

    <details open>
      <summary>Mostra/Nascondi soluzioni</summary>
      <div class="sol">
QUIZ A ‚Äî Tempo
A1 SP
A2 PP
A3 PP
A4 SP
A5 PP
A6 PP
A7 GONE
A8 BEEN
A9 EVER
A10 NEVER
A11 SP
A12 SP

QUIZ B ‚Äî Perch√©
B1 DEF_TIME
B2 LIFE_EXP
B3 RESULT_NOW
B4 AGO
B5 UNFINISHED
B6 DURATION
B7 GONE_NOT_HERE
B8 BEEN_BACK
B9 EVER_Q
B10 NEVER_NEG
B11 DEF_TIME
B12 DEF_TIME
      </div>
    </details>
  </section>

</main>

<script>
  function norm(s){
    return (s || "").toString().trim().toLowerCase().replace(/\s+/g, " ");
  }

  const allQuestions = Array.from(document.querySelectorAll(".q"));
  const scoreEl = document.getElementById("score");
  const totalEl = document.getElementById("total");
  const triesEl = document.getElementById("tries");
  const checkAllBtn = document.getElementById("checkAllBtn");
  const resetBtn = document.getElementById("resetBtn");

  const totalPoints = allQuestions.reduce((acc, q) => acc + Number(q.dataset.points || 0), 0);
  totalEl.textContent = totalPoints;

  let tries = 0;

  function setFeedback(q, kind, html){
    let fb = q.querySelector(".feedback.dynamic");
    if(!fb){
      fb = document.createElement("div");
      fb.className = "feedback dynamic";
      q.appendChild(fb);
    }
    fb.classList.remove("ok","bad","warn");
    fb.classList.add(kind);
    fb.innerHTML = html;
  }

  function clearDynamicFeedback(){
    document.querySelectorAll(".feedback.dynamic").forEach(el => el.remove());
  }

  function checkQuestion(q){
    const points = Number(q.dataset.points || 0);
    const type = q.dataset.type;

    if(type !== "mc") return { earned:0, max:points, answered:false };

    const radios = Array.from(q.querySelectorAll('input[type="radio"]'));
    const picked = radios.find(r => r.checked)?.value;

    if(!picked){
      setFeedback(q, "warn", "‚è≥ Scegli una risposta.");
      return { earned:0, max:points, answered:false };
    }

    const correct = q.dataset.correct;
    const ok = norm(picked) === norm(correct);
    const explain = q.dataset.explain ? `<div class="small">Perch√©: ${q.dataset.explain}</div>` : "";

    setFeedback(q, ok ? "ok" : "bad",
      (ok ? "‚úÖ Giusto!" : `‚ùå Sbagliato. Risposta corretta: <b>${correct}</b>.`) + explain
    );

    return { earned: ok ? points : 0, max: points, answered:true };
  }

  function checkAll(){
    tries += 1;
    triesEl.textContent = tries;
    clearDynamicFeedback();

    let earned = 0;
    let answeredCount = 0;

    for(const q of allQuestions){
      const res = checkQuestion(q);
      earned += res.earned;
      if(res.answered) answeredCount += 1;
    }

    scoreEl.textContent = earned;

    const pct = Math.round((earned / totalPoints) * 100);
    const msg =
      pct === 100 ? "Perfetto üíØ" :
      pct >= 85 ? "Ottimo! Rifai solo gli errori." :
      pct >= 70 ? "Buono. Rivedi le spiegazioni e riprova." :
      "Serve un altro giro: leggi le slide e ripeti le regole a voce.";

    let summary = document.getElementById("summaryBox");
    if(!summary){
      summary = document.createElement("div");
      summary.id = "summaryBox";
      summary.className = "feedback";
      summary.style.marginTop = "12px";
      document.querySelector(".title").appendChild(summary);
    }
    summary.className = "feedback " + (pct>=85 ? "ok" : pct>=70 ? "warn" : "bad");
    summary.innerHTML = `<b>Risultato:</b> ${earned}/${totalPoints} (${pct}%). ${msg}<div class="small">Domande risposte: ${answeredCount}/${allQuestions.length}</div>`;
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  function resetAll(){
    tries = 0;
    triesEl.textContent = tries;
    scoreEl.textContent = "0";
    clearDynamicFeedback();
    document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
    const summary = document.getElementById("summaryBox");
    if(summary) summary.remove();
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  checkAllBtn.addEventListener("click", checkAll);
  resetBtn.addEventListener("click", resetAll);
</script>

</body>
</html>
